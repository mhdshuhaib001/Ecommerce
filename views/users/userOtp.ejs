<!DOCTYPE html>
<html lang="en">

<head>

  <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>Loom Fashion</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">


  <link rel="stylesheet" href="/css/userOtp.css">
  <!-- Boxicons CSS -->
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>




  </header>


  <div class="container">
    <header>
      <i class="bx bxs-check-shield"></i>
    </header>
    <h4>Enter OTP Code</h4>
    <p>Your code was sent to you via email</p>
   <form  class="otp-form" id="otpForm">
      <div class="input-field" id="otp-container">
        <input type="number" name="otp" id="otp" maxlength="1">
      </div>

      <p id="timeSpan"> Resend OTP in <b class="text-dark"><span id="timer">60 </span></b> Seconds.</p>
      
      <% if(verifyErr){ %>
        <div id="myAlert1" data-aos="fade-down" style="top: 6rem;  color: rgb(38, 13, 119); "
          class="alert alert-dark  py-4	 fade show fs-5 fixed-top alt text-center text-white" role="alert">
          <strong>Uh-oh!</strong> Your account is not verified yet, please verify.<a href=""> <span
              class="text-info link-underline-light">
            </span></a>
        </div>
        <% } %>
        <% if(typeof resend !== 'undefined'){ %>
          <div id="myAlert1" data-aos="fade-down" style="top: 6rem; color: rgb(38, 13, 119);"
                  class="alert alert-dark  py-4	 fade show fs-5 fixed-top alt text-center text-white"
              role="alert">
               <%= resend%><a
                href=""> <span class="text-info link-underline-light">
                </span></a>
          </div>
          <% } %>
        
          <button style="background-color: #1f6f6f;" onmouseover="this.style.backgroundColor='#198585'" onmouseout="this.style.backgroundColor='#1f6f6f'" type="submit" id="otpSubmit" onclick="validate()" class="btn">Verify OTP</button>
    </form>
    <div id="otp-error" class="error-message " style="color: rgb(186, 35, 35);" ></div>

    <p style="display: none;" id="resendLink">Didn't get the OTP &nbsp; <a href="/resendOtp"><b class="text-white">
      Resend</b></a></p>
  </div>
  <script>


    const input = document.getElementById('otp')
    const errorMessage = document.getElementById('otp-error')
    const alertbox = document.getElementById("myAlert1")
    
    
      input.addEventListener('input',function(){
        errorMessage.textContent = ""
        alertbox.style.display="none"
      })

      function validate() {
        const otp = document.getElementById("otp").value;
        if (otp == "") {
          document.getElementById("otp-error").innerText = "Must fill out this field";
          return false;
        }
      }

  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

  <script src="userjs/otpValidation.js"></script>
  </body>

</html>