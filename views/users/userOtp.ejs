<!DOCTYPE html>
<html lang="en">

<head>

  <link rel="stylesheet" href="/css/userOtp.css">
  <!-- Boxicons CSS -->
  <link href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" rel="stylesheet" />


  </header>


  <div class="container">
    <header>
      <i class="bx bxs-check-shield"></i>
    </header>
    <h4>Enter OTP Code</h4>
    <p>Your code was sent to you via email</p>
    <form method="post"  onsubmit="return validate()" class="otp-form">
      <div class="input-field" id="otp">
        <input type="number" name="a" oninput="moveToNextInput(this)" maxlength="1" />
        <input type="number" name="b" disabled maxlength="1" />
        <input type="number" name="c" disabled maxlength="1" />
        <input type="number" name="d" disabled maxlength="1" />
        <input type="hidden" name="otp" id="completeOtp" />

      </div>
      <div id="otp-error" class="error-message"></div>
      <p id="timeSpan"> Resend OTP in <b class="text-dark"><span id="timer">60 </span></b> Seconds.</p>
      <p style="display: none;" id="resendLink">Didn't get the OTP &nbsp; <a href="/resendOtp"><b class="text-dark">
            Resend</b></a></p>
      <% if(verifyErr){ %>
        <div id="myAlert1" data-aos="fade-down" style="top: 6rem;     background-color: #1f6f6f"
          class="alert alert-dark  py-4	 fade show fs-5 fixed-top alt text-center text-white" role="alert">
          <strong>Uh-oh!</strong> Your account is not verified yet, please verify.<a href=""> <span
              class="text-info link-underline-light">
            </span></a>
        </div>
        <% } %>
        <% if(typeof resend !== 'undefined'){ %>
          <div id="myAlert1" data-aos="fade-down" style="top: 6rem; background-color: #1f6f6f"
                  class="alert alert-dark  py-4	 fade show fs-5 fixed-top alt text-center text-white"
              role="alert">
               <%= resend%><a
                href=""> <span class="text-info link-underline-light">
                </span></a>
          </div>
          <% } %>
        
          <button style="background-color: #1f6f6f;" onmouseover="this.style.backgroundColor='#198585'" onmouseout="this.style.backgroundColor='#1f6f6f'" type="submit" id="otpSubmit" onclick="validate()" class="btn">Verify OTP</button>


    </form>
  </div>
  <script>

const otp = [
        $("input[name='a']").val(),
        $("input[name='b']").val(),
        $("input[name='c']").val(),
        $("input[name='d']").val()
      ];

    const input = document.getElementById('otp')
    const errorMessage = document.getElementById('otp-error')
    const alertbox = document.getElementById("myAlert1")
    
    
      input.addEventListener('input',function(){
        errorMessage.textContent = ""
        alertbox.style.display="none"
      })

      function validate() {
        const otp = document.getElementById("otp").value;
        if (otp == "") {
          document.getElementById("otp-error").innerText = "Must fill out this field";
          return false;
        }
      }

  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.4/jquery.min.js"></script>

  <script src="js/otpValidation.js"></script>
  </body>

</html>