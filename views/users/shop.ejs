<!DOCTYPE html>
<html lang="en">

    <head>
        <meta charset="utf-8">
        <meta http-equiv="x-ua-compatible" content="ie=edge">
        <title>Loom Fashion</title>
        <meta name="description" content>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <link rel="shortcut icon" type="image/x-icon" href="img/favicon.ico">

        <!-- External CSS libraries -->
        <link rel="stylesheet" type="text/css"
            href="https://common.olemiss.edu/_js/sweet-alert/sweet-alert.css">
        <link rel="stylesheet"
            href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
        <link rel="stylesheet"
            href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <link rel="stylesheet"
            href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" />

        <!-- Custom Stylesheets -->
        <link rel="stylesheet" href="/css/profile.css">
        <link rel="stylesheet" href="/css/owl.carousel.min.css">
        <link rel="stylesheet" href="/css/fontawesome.min.css">
        <link rel="stylesheet" href="/css/animate.min.css">
        <link rel="stylesheet" href="/css/magnific-popup.css">
        <link rel="stylesheet" href="/css/fontawesome-all.min.css">
        <link rel="stylesheet" href="/css/meanmenu.css">
        <link rel="stylesheet" href="/css/slick.css">
        <link rel="stylesheet" href="/css/default.css">
        <link rel="stylesheet" href="/css/style.css">
        <link rel="stylesheet" href="/css/responsive.css">

        <!-- jQuery and Bootstrap JavaScript libraries -->
        <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.9.2/umd/popper.min.js"></script>
        <script
            src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>

        <!-- Additional JavaScript libraries -->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <script src="https://cdn.jsdelivr.net/npm/mixitup@3"></script>

        <!-- Your other scripts go here -->

    </head>

    <body>

        <div id="loader-wrapper">
            <div id="loader"></div>
        </div>
        <!-- header section start -->
        <header class="header pt-30 pb-30  header-sticky header-static"
            style="padding-top: 30px; padding-bottom: 15px; top: 0px;">
            <div class="container-fluid">
                <div class="header-nav position-relative">
                    <div class="row align-items-center">

                        <div
                            class="col-xl-5 col-lg-6 hidden-md position-static">
                            <div class="header-nav">
                                <nav>
                                    <ul>
                                        <li><a href="/home"
                                                class="active"><span>Home
                                                </span></a>

                                        </li>
                                        <li class="position-static"><a
                                                href="/shop"><span>Shop
                                                </span></a>
                                            <!-- <div class="mega-menu">
                                                <div class="col-xl-7 pl-0 position-static">
                                                    <ul>
                                                        <li><a href="/shop">Shop </a></li>
                                                    </ul>
                                                </div>
                                            </div> -->
                                        </li>

                                        <li><a
                                                href="/contact"><span>Contact</span></a></li>
                                    </ul>
                                </nav>
                            </div>
                        </div>
                        <div class="col-xl-3 col-lg-3 col-md-6 col-sm-6 col-3">
                            <div class="logo">
                                <a href="home"><img src="img/logo/loomLogo.png"
                                        alt></a>
                            </div>
                        </div>

                        <div
                            class="col-xl-4 col-lg-3 col-6 col-md-6 col-sm-6 col-9">
                            <div class="header-right">

                                <ul class="text-right">

                                    <% if(locals.user){ %>
                                    <li><a href="userProfile" class="account"><i
                                                class="fal fa-user-friends"></i>
                                            <article
                                                class="account-registar d-inline-block"></article>
                                        </a></li>
                                    <% }else {%>
                                    <li><a href="login" class="account"><i
                                                class="fal fa-user-friends"></i>
                                            <article
                                                class="account-registar d-inline-block">Login/signup</article>
                                        </a></li>
                                    <% } %>

                                    <li><a href="javascript:void(0)"><i
                                                class="fal fa-search"></i></a>

                                        <!-- search popup -->
                                        <div id="search-popup">
                                            <div class="close-search-popup">
                                                <i class="fal fa-times"></i>
                                            </div>
                                            <div
                                                class="search-popup-inner mt-135">
                                                <div
                                                    class="search-title text-center">
                                                    <h2>Search</h2>
                                                </div>

                                                <div
                                                    class="search-content pt-55">
                                                    <ul class="text-center">
                                                        <li><a
                                                                href="javascript:void(0)"
                                                                class="active">All
                                                                categories</a>
                                                        </li>
                                                        <!-- <li><a href="javascript:void(0)">Clothing</a></li>
                                                                <li><a href="javascript:void(0)">Gift Cards</a></li>
                                                                <li><a href="javascript:void(0)">Handbag</a></li>
                                                                <li><a href="javascript:void(0)">Kids</a></li>
                                                                <li><a href="javascript:void(0)">Shoes</a></li>
                                                                <li><a href="javascript:void(0)">Sneaker</a></li>
                                                                <li><a href="javascript:void(0)">Women</a></li> -->
                                                    </ul>

                                                    <div
                                                        class="search-form mt-35">
                                                        <form id="search-form"
                                                            action="/searchAndFilter"
                                                            method="get">
                                                            <input type="search"
                                                                name="searchQuary"
                                                                id="searchQuary"
                                                                placeholder="search product"
                                                                required>

                                                            <button
                                                                type="submit"><i
                                                                    class="fal fa-search"></i></button>
                                                        </form>
                                                    </div>

                                                    <!-- <div class="search-result-list">
                                                    <ul class="text-left">
                                                        <li class="d-block d-flex align-items-center">
                                                            <div class="search-result-img">
                                                                <img src="img/product/1.jpg" class="w-100" alt>
                                                            </div>
                                                            <div class="search-result-desc pl-10">
                                                                <a href="single-product-4.html" class="title px-0">ELLE
                                                                    -
                                                                    Recliner
                                                                    syntheti
                                                                    chair</a>
                                                                <div class="price">$<span>399</span></div>
                                                            </div>
                                                        </li>
                                                    </ul>
                                                  </div> -->
                                                </div>

                                            </div>
                                        </div>
                                    </li>
                                    <li><a href="wishlist" data-toggle="tooltip"
                                            data-placement="bottom" title
                                            data-original-title="view wishlist"><i
                                                class="fal fa-heart"><span></span></i></a></li>

                                    <!-- Your HTML code ... -->

                                    <li>
                                        <div id="reloadArea">
                                        <a href="cart">
                                            <i class="fal fa-shopping-bag" >
                                                <span>
                                                    <%= (typeof cartCount
                                                    !=='undefined' && cartCount
                                                    !==null &&
                                                    cartCount !=="" ) ?
                                                    cartCount : '0' %>
                                                </span>
                                            </i>
                                        </a>
                                    </div>
                                    </li>

                                    <!-- Your HTML code ... -->
                                    <!-- <div class="minicart">
                                                            <div class="minicart-body">
                                                                <div class="minicart-content">
                                                                    <ul class="text-left">
                                                                        <li>
                                                                            <div class="minicart-img">
                                                                                <a href="single-product-4.html"
                                                                                    class="p-0"><img
                                                                                        src="img/product/1.jpg"
                                                                                        class="w-100" alt=""></a>
                                                                            </div>
                                                                            <div class="minicart-desc">
                                                                                <a href="single-product-4.html"
                                                                                    class="p-0">Capitalize on
                                                                                    low hanging fruit t</a>
                                                                                <strong>1 × $250.00</strong>
                                                                            </div>
                                                                            <div class="remove">
                                                                                <i class="fal fa-times"></i>
                                                                            </div>
                                                                        </li>

                                                                        <li>
                                                                            <div class="minicart-img">
                                                                                <a href="single-product-4.html"
                                                                                    class="p-0"><img
                                                                                        src="img/product/2.jpg"
                                                                                        class="w-100" alt=""></a>
                                                                            </div>
                                                                            <div class="minicart-desc">
                                                                                <a href="single-product-4.html"
                                                                                    class="p-0">Leather
                                                                                    Courriere duffle ba</a>
                                                                                <strong>1 × $150.00</strong>
                                                                            </div>
                                                                            <div class="remove">
                                                                                <i class="fal fa-times"></i>
                                                                            </div>
                                                                        </li>


                                                                        <li>
                                                                            <div class="minicart-img">
                                                                                <a href="single-product-4.html"
                                                                                    class="p-0"><img
                                                                                        src="img/product/3.jpg"
                                                                                        class="w-100" alt=""></a>
                                                                            </div>
                                                                            <div class="minicart-desc">
                                                                                <a href="single-product-4.html"
                                                                                    class="p-0">Party Supplies
                                                                                    Around Cupcake</a>
                                                                                <strong>1 × $150.00</strong>
                                                                            </div>
                                                                            <div class="remove">
                                                                                <i class="fal fa-times"></i>
                                                                            </div>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                            </div>
                                                            <div class="minicart-checkout">
                                                                <div
                                                                    class="minicart-checkout-heading mt-8 mb-25 overflow-hidden">
                                                                    <strong class="float-left">Subtotal:</strong>
                                                                    <span class="price float-right">503.00</span>
                                                                </div>
                                                                <div class="minicart-checkout-links">
                                                                    <a href="cart.html"
                                                                        class="generic-btn black-hover-btn text-uppercase w-100 mb-20">View
                                                                        cart</a>
                                                                    <a href="checkout.html"
                                                                        class="generic-btn black-hover-btn text-uppercase w-100 mb-20">Checkout</a>
                                                                </div>
                                                            </div>
                                                        </div> -->
                                </li>
                                <li><a href="javascript:void(0)"><i
                                            class="fal fa-align-right"></i></a>
                                    <ul class="submenu bold-content text-right">
                                        <li><a href="userProfile">My
                                                Account</a></li>
                                        <li><a
                                                href="checkout.html">Checkout</a></li>
                                        <li><a href="shop.html">Shop</a></li>
                                        <li><a
                                                href="wishlist.html">Wishlist</a></li>
                                        <li><a href="/logout"><i
                                                    class="bi bi-box-arrow-right"></i>
                                                LogOut</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="mobile-menu visible-sm">
                <div id="mobile-menu">
                    <ul>
                        <li><a class="pl-3" href="javascript:void(0)">Home</a>
                         
                        </li>
                        <li><a class="pl-3" href="javascript:void(0)">Shop</a>
                           
                        </li>

                        <li><a href="javascript:void(0)">Portfolio</a>
                            <ul>
                                <li><a href="portfolio.html">Single
                                        project</a></li>
                                <li><a href="portfolio2.html">Two
                                        Columns</a></li>
                                <li><a href="portfolio3.html">Three
                                        Columns</a></li>
                            </ul>
                        </li>
                        <li><a href="contact.html">Contact</a></li>
                    </ul>
                </div>
            </div>
            <!-- /. mobile nav -->
        </div>

    </header>
    <!-- header section end -->
    <!-- preloader -->
    <div class="shop-body mb-90">
        <div class="container-fluid">
            <div class="shop-wrapper">
                <div class="row">
                    <div class="col-xl-3 hidden-xl">
                        <!-- filter area  -->
                        <div class="widget mt-50">
                            <h4 class="mb-30">Popular Tags</h4>
                            <div class="category-list">
                                <ul>
                                    <li><a href="shop">All</a></li>
                                    <% category.forEach((category,ind)=>{ %>
                                    <li><a
                                            href="shop?category=<%= category._id %>">
                                            <%= category.name %>
                                        </a></li>
                                    <% }) %>
                                </ul>
                            </div>
                        </div>

                        <div class="widget mt-50">
                            <h4 class="mb-30">Filter By Price</h4>
                            <form action="/searchAndFilter" method="get">
                                <div class="filter-form-submit mt-35">
                                    
                                    <label>
                                        <input type="radio" name="price"
                                            value="999-1999"> ₹999 - ₹1999
                                    </label>
                                    <label>
                                        <input type="radio" name="price"
                                            value="2000-3999"> ₹2000 - ₹3999
                                    </label>
                                    <label>
                                        <input type="radio" name="price"
                                            value="0-1000000000"> All Price
                                    </label>
                                    <label>
                                        <input type="radio" name="sortOrder"
                                            id="lowToHigh" value="lowToHigh">
                                        Low to High
                                    </label>
                                    <label>
                                        <input type="radio" name="sortOrder"
                                            id="highToLow" value="highToLow">
                                        High to Low
                                    </label>
                                    <button type="submit">Filter</button>
                                </div>
                            </form>

                        </div>
                        <!-- <div class="widget mt-50">
                             
                            </div> -->
                        <!-- <div class="widget mt-50">
                                <h4 class="mb-30">Filter By Size</h4>
                                <div class="size-link">
                                    <a href="shop2.html">3xl</a>
                                    <a href="shop2.html">l</a>
                                    <a href="shop2.html">m</a>
                                    <a href="shop2.html">s</a>
                                    <a href="shop2.html">xl</a>
                                    <a href="shop2.html">xxl</a>
                                </div>
                            </div> -->

                    </div>

                    <!-- end filter herre  -->

                    <!-- /. widget -->
                    <div class="col-xl-9">
                        <div class="filter-heading">
                            <div class="row">
                                <div class="col-xl-4 col-lg-4 col-md-4 col-12">
                                    <div class="filter-shown-item">
                                        <p class="mb-0">
                                            Showing <span>
                                                <%= (currentPage - 1) * limit +
                                                1 %>
                                            </span>–
                                            <span>
                                                <%= Math.min(currentPage *
                                                limit, totalProducts) %>
                                            </span>
                                            of <span class="total_count">
                                                <%= totalProducts %>
                                            </span> results
                                        </p>
                                        <p class="mb-0">
                                            Page <span>
                                                <%= currentPage %>
                                            </span>
                                            of <span>
                                                <%= totalPages %>
                                            </span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- /. filter heading -->
                        <% if(products.length !=0) {%>

                        <div>
                            <div class="product-wrapper mt-55">
                                <div class="row">
                                    <% products.forEach(product=> { %>
                                    <div
                                        class="col-xl-3 col-lg-3 col-md-4 col-sm-6 col-12">
                                        <div class="product-box mb-40">
                                            <div class="product-box-wrapper">
                                                <div class="product-img">
                                                    <img
                                                        src="/products/crops/<%= product.images.image1 %>"
                                                        class="w-100"
                                                        alt="<%= product.name %>"
                                                        loading="lazy">
                                                    <a
                                                        href="/product?id=<%= product._id %>"
                                                        class="d-block">
                                                        <div class="second-img">
                                                            <img
                                                                src="/products/crops/<%= product.images.image2 %>"
                                                                alt="<%= product.name %>"
                                                                class="w-100"
                                                                loading="lazy">
                                                        </div>
                                                    </a>
                                                    <a href="javascript:void(0)"
                                                        class="product-img-link quick-view-1 text-capitalize">Quick view</a>
                                                </div>
                                                
                                                <div class="product-desc pb-20">
                                                    <div
                                                        class="product-desc-top">
                                                        <div class="categories">
                                                            <a href="shop2.html"
                                                                class="product-category">
                                                                <span>
                                                                </span>
                                                            </a>
                                                        </div>
                                                        <a
                                                            onclick="addToWishlist('<%=product._id%>')"
                                                            class="wishlist float-right">
                                                            <span><i
                                                                    class="fal fa-heart"></i></span>
                                                        </a>
                                                    </div>
                                                    <a href="/product"
                                                        class="product-title">
                                                        <%= product.name %>
                                                    </a>
                                                    <div class="price-switcher">
                                                        <span
                                                            class="price switcher-item">₹<%=
                                                            product.price %>
                                                        </span>
                                                        <a
                                                        
                                                            onclick="addToCart('<%= product._id %>')"
                                                            class="add-cart text-capitalize switcher-item"
                                                            style="cursor: pointer;">
                                                            + Add to Cart
                                                        </a>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <% }); %>

                                </div>
                                <div class="text-center mt-20">
                                    <nav aria-label="Page navigation">
                                        <ul
                                            class="pagination justify-content-center">
                                            <li
                                                class="page-item <%= currentPage === 1 ? 'disabled' : '' %>">
                                                <a class="page-link"
                                                    href="/shop?page=<%= currentPage - 1 %>"
                                                    aria-label="Previous">
                                                    <span
                                                        aria-hidden="true">&laquo;</span>
                                                </a>
                                            </li>

                                            <% for (let i=1; i <=totalPages;
                                            i++) { %>
                                            <li
                                                class="page-item <%= i === currentPage ? 'active' : '' %>">
                                                <a class="page-link"
                                                    href="/shop?page=<%= i %>">
                                                    <%= i %>
                                                </a>
                                            </li>
                                            <% } %>
                                            <li
                                                class="page-item <%= currentPage === totalPages ? 'disabled' : '' %>">
                                                <a class="page-link"
                                                    href="/shop?page=<%= currentPage + 1 %>"
                                                    aria-label="Next">
                                                    <span
                                                        aria-hidden="true">&raquo;</span>
                                                </a>
                                            </li>
                                        </ul>
                                    </nav>
                                </div>
                            </div>
                        </div>
                        <% }else{ %>
                        <div
                            style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 50vh; background-color: #f8f8f8; border-radius: 10px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); padding: 20px;">
                            <h4 style="color: #333;">No product</h4>
                            <p
                                style="color: #666; margin-top: 10px; text-align: center;">Explore
                                our amazing
                                collection and find something you'll love!</p>
                            <a href="/shop"
                                style="text-decoration: none; background-color: #3498db; color: #fff; padding: 10px 20px; border-radius: 5px; margin-top: 15px;">Go
                                Shop</a>
                        </div>

                        <% } %>

                        <!-- /. filter content -->
                    </div>
                    <!-- /. shop products -->
                </div>
            </div>
        </div>
    </div>

  
<%- include('../layouts/user/footer.ejs') -%>